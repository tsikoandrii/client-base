!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=function(){function n(e,i){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t(this,n),this.$el=document.getElementById(e),this.$backdrop=document.getElementById(i),this.closure=a,this.open=this.open.bind(this),this.close=this.close.bind(this),this.prepare()}var i,a,c;return i=n,(a=[{key:"prepare",value:function(){this.closure&&this.$backdrop.addEventListener("click",this.close)}},{key:"open",value:function(){this.$el.classList.add("active"),this.$backdrop.classList.add("active")}},{key:"close",value:function(){this.$el.classList.remove("active"),this.$backdrop.classList.remove("active")}},{key:"getElement",value:function(){return this.$el}}])&&e(i.prototype,a),c&&e(i,c),Object.defineProperty(i,"prototype",{writable:!1}),n}(),i=n,a=function(t,e){var n=window.CLIENTS[t];if(n){var i=e.getElement(),a=i.querySelector('[data-field="title"]'),c=i.querySelector('[data-field="phone"]'),o=i.querySelector('[data-field="email"]'),r=i.querySelector('[data-field="date"]'),l=i.querySelector('[data-field="department"]'),s=i.querySelector('[data-field="additional"]');a.innerHTML=n.name,c.innerHTML=n.phone,c.href="tel:"+n.phone,o.innerHTML=n.email,o.href="mailto:"+n.email,r.innerHTML=n.hire_date,l.innerHTML=n.department,s.innerHTML="Address: "+n.address,e.open()}},c=function(t){window.CLIENTS=t;var e=document.getElementById("clients-container");e.innerHTML=t.map((function(t,e){return'<div class="client" data-id="'.concat(e,'">\n\t\t\t<div class="client__name">').concat(t.name,'</div>\n\t\t\t<div class="client-contacts">\n\t\t\t\t<div class="client-contacts__item client-contacts__item--tel">\n\t\t\t\t\t<img src="images/icons/phone.svg" alt="phone">\n\t\t\t\t\t<span>').concat(t.phone,'</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="client-contacts__item">\n\t\t\t\t\t<img src="images/icons/mail.svg" alt="mail">\n\t\t\t\t\t<span>').concat(t.email,"</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>")})).join(" "),e.querySelectorAll(".client").forEach((function(t){t.addEventListener("click",(function(t){var e=t.target.closest(".client").dataset.id;a(e,window.POPUP)}))}))},o=function(t){var e=document.getElementById("loader");e.classList.add("active");var n=t?"/api/?term=".concat(t):"/api/";return fetch(n).then((function(t){return t.json()})).then((function(t){c(t),e.classList.remove("active")}))};document.addEventListener("DOMContentLoaded",(function(){window.POPUP=new i("client-popup","backdrop"),document.getElementById("client-popup-close").addEventListener("click",POPUP.close),o(),document.querySelector("#search input").addEventListener("input",(function(t){t.preventDefault();var e=t.target.value.trim();e?o(encodeURIComponent(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"))):o()}))}))}();